<!DOCTYPE html>
{% load static %}
<html>
  <head>
    <title>Client Page</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css"
      rel="stylesheet"
      crossorigin="anonymous"
    />

    <script>
      async function getData(url) {
        
        var clientId=document.getElementById('clientList').value
        const response = await fetch("/api/clients/"+clientId);
        const client = await response.json();
        console.log(client);
        document.getElementsByClassName("card-title")[0].textContent=client.first_name+' '+client.last_name
        document.getElementsByClassName("card-text")[0].textContent='Company Name  :'+client.company_name
      }
    </script>

  </head>
  <body>
    <div class="container">
          <p>Select a Client</p>
          <select id="clientList" class="form-select form-select-sm" id="clientList" aria-label="Small select example"
          onChange="getData()">
            <option selected>Select a client</option>
            {% for client in clients %}
            <option value="{{ client.pk }}">{{ client }}</option>
            {% endfor %}
          </select>
          <div class="card" style="width: 18rem;">
            <div class="card-body">
              <h5 class="card-title">Card title</h5>
              <p class="card-text">Some quick example text to build on the card title and make up the bulk of the card's content.</p>
              
            </div>
          </div>
    </div>
  </body>
  </html>